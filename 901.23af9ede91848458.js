"use strict";(self.webpackChunktapwater_app=self.webpackChunktapwater_app||[]).push([[901],{4901:(N,f,c)=>{c.r(f),c.d(f,{LoggedInModule:()=>O});var l=c(9808);class v{constructor(s,e,o){this.peso=s,this.altura=e,this.copoPadrao=o}}var t=c(1223),g=c(1290),m=c(651);let h=(()=>{class n{constructor(){this.personalSettings=m.K.get(g.g.PERSONAL_SETTINGS_KEY)}save(e){m.K.set(g.g.PERSONAL_SETTINGS_KEY,e)}update(e){this.personalSettings=m.K.get(g.g.PERSONAL_SETTINGS_KEY),this.save(e)}getSettings(){return this.personalSettings=m.K.get(g.g.PERSONAL_SETTINGS_KEY),this.personalSettings}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var a=c(2382);const C=["form"];function T(n,s){if(1&n&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.ekj("red",!e.isSuccess)("blue",e.isSuccess),t.xp6(1),t.hij(" ",e.message," ")}}let y=(()=>{class n{constructor(e){this.personalSettingsService=e,this.isShowMessage=!1}ngOnInit(){this.personalSettings=this.personalSettingsService.getSettings(),null==this.personalSettings&&(this.personalSettings=new v("","",""))}onSubmit(){this.personalSettingsService.save(this.personalSettings),this.isShowMessage=!0,this.isSuccess=!0,this.message="Cadastro realizado com sucesso!"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-personal-settings"]],viewQuery:function(e,o){if(1&e&&t.Gf(C,5),2&e){let i;t.iGM(i=t.CRH())&&(o.form=i.first)}},decls:30,vars:8,consts:[[1,"container","contact"],[1,"row"],[1,"col","s12"],["id","msg-login","class","card-panel white-text",3,"red","blue",4,"ngIf"],[1,"col","s12",3,"submit"],["form","ngForm"],[1,"input-field","col","s6"],["id","input-peso","name","input-peso","type","text","pattern","^(0|[1-9]\\d*)(,\\d+)?$","required","",1,"validate",3,"ngModel","ngModelChange"],["peso","ngModel"],["for","input-peso",1,"active"],[1,"red-text",3,"hidden"],["id","input-altura","name","input-altura","type","text","pattern","^(0|[1-9]\\d*)(,\\d+)?$","required","",1,"validate",3,"ngModel","ngModelChange"],["altura","ngModel"],["for","input-altura",1,"active"],[1,"input-field","col","s12"],["id","input-copo","name","input-copo","type","text","pattern","^(0|[1-9]\\d*)(\\.\\d+)?$",1,"validate",3,"ngModel","ngModelChange"],["copo","ngModel"],["for","input-copo",1,"active"],["type","submit",1,"btn","waves-effect","cyan","waves-light","darken-1",3,"disabled"],["id","msg-login",1,"card-panel","white-text"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,T,2,5,"div",3),t.qZA(),t.TgZ(4,"form",4,5),t.NdJ("submit",function(){return o.onSubmit()}),t.TgZ(6,"div",6)(7,"input",7,8),t.NdJ("ngModelChange",function(r){return o.personalSettings.peso=r}),t.qZA(),t.TgZ(9,"label",9),t._uU(10,"Peso (KG) *"),t.qZA(),t.TgZ(11,"div",10),t._uU(12," Por favor, preencha o campo com o seu peso. "),t.qZA()(),t.TgZ(13,"div",6)(14,"input",11,12),t.NdJ("ngModelChange",function(r){return o.personalSettings.altura=r}),t.qZA(),t.TgZ(16,"label",13),t._uU(17,"Altura (m) *"),t.qZA(),t.TgZ(18,"div",10),t._uU(19," Por favor, preencha o campo com a sua altura. "),t.qZA()(),t.TgZ(20,"div",14)(21,"input",15,16),t.NdJ("ngModelChange",function(r){return o.personalSettings.copoPadrao=r}),t.qZA(),t.TgZ(23,"label",17),t._uU(24,"Copo padr\xe3o (ml)"),t.qZA(),t.TgZ(25,"div",10),t._uU(26," Por favor, preencha o com um valor numerico. "),t.qZA()(),t.TgZ(27,"div",2)(28,"button",18),t._uU(29," Salvar "),t.qZA()()()()()),2&e){const i=t.MAs(5),r=t.MAs(8),p=t.MAs(15),d=t.MAs(22);t.xp6(3),t.Q6J("ngIf",o.isShowMessage),t.xp6(4),t.Q6J("ngModel",o.personalSettings.peso),t.xp6(4),t.Q6J("hidden",r.valid||r.untouched),t.xp6(3),t.Q6J("ngModel",o.personalSettings.altura),t.xp6(4),t.Q6J("hidden",p.valid||p.untouched),t.xp6(3),t.Q6J("ngModel",o.personalSettings.copoPadrao),t.xp6(4),t.Q6J("hidden",d.valid||d.untouched),t.xp6(3),t.Q6J("disabled",!i.valid)}},directives:[l.O5,a._Y,a.JL,a.F,a.Fj,a.c5,a.Q7,a.JJ,a.On],styles:[""]}),n})();var u=c(5358);let A=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-menu"]],decls:18,vars:0,consts:[[1,"navbar-fixed",2,"z-index","1001 !important"],[1,"nav-wrapper"],[1,"container","hide-on-med-and-down"],["routerLink","/home",1,"brand-logo"],["src","assets/resources/images/logo.png",1,"my-logo"],[1,"right"],["routerLink","/list"],["src","assets/resources/images/list.png",1,"my-logo"],["routerLink","/settings",2,"margin-left","16px"],["src","assets/resources/images/settings.png",1,"my-logo"],[1,"container","hide-on-large-only"],["routerLink","/list",1,"left"],["routerLink","/settings",1,"right",2,"margin-left","16px"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"nav")(2,"div",1)(3,"div",2)(4,"a",3),t._UZ(5,"img",4),t.qZA(),t.TgZ(6,"div",5)(7,"a",6),t._UZ(8,"img",7),t.qZA(),t.TgZ(9,"a",8),t._UZ(10,"img",9),t.qZA()()(),t.TgZ(11,"div",10)(12,"a",11),t._UZ(13,"img",7),t.qZA(),t.TgZ(14,"a",3),t._UZ(15,"img",4),t.qZA(),t.TgZ(16,"a",12),t._UZ(17,"img",9),t.qZA()()()()())},directives:[u.yS],styles:[".my-logo[_ngcontent-%COMP%]{height:46px;margin-top:10px}"]}),n})();const M=["*"];let I=(()=>{class n{constructor(){this.year=(new Date).getFullYear()}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-footer"]],ngContentSelectors:M,decls:5,vars:1,consts:[[1,"footer-style"],[1,"container","my-font"],["src","assets/resources/images/logo.png","id","logo-footer","height","20em",1,"img-responsive"]],template:function(e,o){1&e&&(t.F$t(),t.TgZ(0,"footer",0)(1,"div",1),t._uU(2),t._UZ(3,"img",2),t.qZA(),t.Hsn(4),t.qZA()),2&e&&(t.xp6(2),t.hij(" \xa9 Copyright - ",o.year," - Todos os direitos reservados "))},styles:[".footer-style[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center}"]}),n})(),U=(()=>{class n{constructor(){this.title="tapwater-app",this.currentDate=new Date}ngOnInit(){navigator.geolocation.getCurrentPosition(e=>{this.coords=e.coords}),setInterval(()=>{this.currentDate=new Date},1e3)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-logged-in"]],decls:9,vars:6,template:function(e,o){1&e&&(t.TgZ(0,"header"),t._UZ(1,"app-menu"),t.qZA(),t.TgZ(2,"main"),t._UZ(3,"router-outlet"),t.qZA(),t.TgZ(4,"app-footer")(5,"span"),t._uU(6),t.ALo(7,"date"),t.qZA(),t._uU(8),t.qZA()),2&e&&(t.xp6(6),t.Oqu(t.xi3(7,3,null==o?null:o.currentDate,"HH:mm:ss")),t.xp6(2),t.AsE(" - Latitude: ",null==o.coords?null:o.coords.latitude," e Longitude: ",null==o.coords?null:o.coords.longitude,"\n"))},directives:[A,u.lC,I],pipes:[l.uU],styles:[""]}),n})();class q{constructor(s,e,o){this.id=String(Math.round(1e3*Math.random())),this.quant=s,this.day=e,this.hour=o}}var _=c(520),b=c(2843),S=c(262);let Z=(()=>{class n{constructor(e){this.httpClient=e,this.URL="http://localhost:3000/consumption",this.httpOptions={headers:new _.WM({"Content-Type":"application/json"})}}handleError(e){return 0===e.status?console.error("An error occurred:",e.error):console.error(`Backend returned code ${e.status}, body was: `,e.error),(0,b._)(()=>new Error("Something bad happened; please try again later."))}save(e){return this.httpClient.post(this.URL,JSON.stringify(e),this.httpOptions).pipe((0,S.K)(this.handleError)).subscribe()}getByDay(e){return this.httpClient.get(`${this.URL}/?day=${e}`).pipe((0,S.K)(this.handleError))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(_.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function L(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&n){const e=s.$implicit;t.xp6(2),t.Oqu(e.hour),t.xp6(2),t.Oqu(e.quant)}}function J(n,s){if(1&n&&(t.TgZ(0,"table",2)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Horario"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Quantidade"),t.qZA()()(),t.TgZ(7,"tbody"),t.YNc(8,L,5,2,"tr",3),t.qZA()()),2&n){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.consum)}}const P=[{path:"",component:U,children:[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:(()=>{class n{constructor(e,o,i){this.route=e,this.personalSettingsService=o,this.consumService=i}ngOnInit(){this.personalSettings=this.personalSettingsService.getSettings(),null==this.personalSettings&&(this.personalSettings=new v("","",""))}addItemDefault(){var e=parseFloat(this.personalSettings.copoPadrao);e&&0!=e?this.addItem(e):alert("valor para copo padr\xe3o n\xe3o encontrado!")}addItem(e){var o=new Date,i=o.toISOString().slice(0,10),r=o.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),p=new q(e,i,r);this.consumService.save(p),alert("Valor adicionado com sucesso")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.gz),t.Y36(h),t.Y36(Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:23,vars:0,consts:[[1,"container","contact"],[2,"display","flex","justify-content","space-around"],[1,"card-button",3,"click"],["src","assets/resources/images/standard_cup.png",1,"img-button"],["src","assets/resources/images/cup_200ml.png",1,"img-button"],["src","assets/resources/images/cup_250ml.png",1,"img-button"],["src","assets/resources/images/cup_300ml.png",1,"img-button"],["src","assets/resources/images/cup_350ml.png",1,"img-button"],["src","assets/resources/images/cup_400ml.png",1,"img-button"],["src","assets/resources/images/cup_450ml.png",1,"img-button"],["src","assets/resources/images/bottle_500ml.png",1,"img-button"],["src","assets/resources/images/bottle_1L.png",1,"img-button"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form")(2,"div",1)(3,"a",2),t.NdJ("click",function(){return o.addItemDefault()}),t._UZ(4,"img",3),t.qZA(),t.TgZ(5,"a",2),t.NdJ("click",function(){return o.addItem(200)}),t._UZ(6,"img",4),t.qZA(),t.TgZ(7,"a",2),t.NdJ("click",function(){return o.addItem(250)}),t._UZ(8,"img",5),t.qZA()(),t.TgZ(9,"div",1)(10,"a",2),t.NdJ("click",function(){return o.addItem(300)}),t._UZ(11,"img",6),t.qZA(),t.TgZ(12,"a",2),t.NdJ("click",function(){return o.addItem(350)}),t._UZ(13,"img",7),t.qZA(),t.TgZ(14,"a",2),t.NdJ("click",function(){return o.addItem(400)}),t._UZ(15,"img",8),t.qZA()(),t.TgZ(16,"div",1)(17,"a",2),t.NdJ("click",function(){return o.addItem(450)}),t._UZ(18,"img",9),t.qZA(),t.TgZ(19,"a",2),t.NdJ("click",function(){return o.addItem(500)}),t._UZ(20,"img",10),t.qZA(),t.TgZ(21,"a",2),t.NdJ("click",function(){return o.addItem(1e3)}),t._UZ(22,"img",11),t.qZA()()()())},directives:[a._Y,a.JL,a.F],styles:[".card-button[_ngcontent-%COMP%]{height:96px;width:96px;margin-top:50px}.img-button[_ngcontent-%COMP%]{height:96px;width:96px}"]}),n})()},{path:"settings",component:y},{path:"list",component:(()=>{class n{constructor(e,o){this.consumService=e,this.personalSettingsService=o,this.consum=[],this.percent=0,this.suggestedConsumption=2400}ngOnInit(){this.personalSettings=this.personalSettingsService.getSettings();var e=(new Date).toISOString().slice(0,10);this.consumService.getByDay(e).subscribe(o=>{this.consum=o;const i=o.reduce((p,d)=>p+d.quant,0);if(0!=i){if(this.suggestedConsumption=2400,this.personalSettings){var r=parseFloat(this.personalSettings.peso);(r||0!=r)&&(this.suggestedConsumption=35*r)}this.percent=i/this.suggestedConsumption}else this.percent=0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z),t.Y36(h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-water-consumption"]],decls:4,vars:6,consts:[[2,"text-align","center"],["class","highlight",4,"ngIf"],[1,"highlight"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"percent"),t.qZA(),t.YNc(3,J,9,1,"table",1)),2&e&&(t.xp6(1),t.AsE("",t.xi3(2,3,o.percent,"1.2-2")," de ",o.suggestedConsumption,"ml"),t.xp6(2),t.Q6J("ngIf",o.consum&&o.consum.length>0))},directives:[l.O5,l.sg],pipes:[l.Zx],styles:[""]}),n})()}]}];let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(P)],u.Bz]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,F,a.u5,_.JF]]}),n})()}}]);